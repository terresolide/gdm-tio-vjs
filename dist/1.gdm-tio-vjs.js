(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{219:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"symbol_west":"W","mean_velocity":"Mean Velocity","meter_day":"m/day"},"fr":{"symbol_west":"O","mean_velocity":"Vitesse moyenne","meter_day":"m/jour"}}'),delete t.options._Ctor}},220:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"fr":{"by_date":"By date","height":"Hauteur","plot_point":"Données du point sélectionné","QUALITY":"QUALITÉ","mean_velocity":"Vitesse moyenne"},"en":{"by_date":"Par date","height":"Height","plot_point":"Data of the selected point","QUALITY":"QUALITY","mean_velocity":"Mean velocity"}}'),delete t.options._Ctor}},221:function(t,e,i){var n=i(229);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(3).default)("f0a08916",n,!0,{})},222:function(t,e,i){var n=i(233);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(3).default)("64cb7607",n,!0,{})},228:function(t,e,i){"use strict";i(221)},229:function(t,e,i){(e=i(2)(!1)).push([t.i,"\nsvg.compass-rose text {\n font-size: 24px;\n}\nsvg.compass-rose text.card {\n font-family: century-gothic, sans-serif;\n font-weight:700;\n font-size:18px;\n}\n\n",""]),t.exports=e},230:function(t,e,i){"use strict";var n=i(219),s=i.n(n);e.default=s.a},232:function(t,e,i){"use strict";i(222)},233:function(t,e,i){(e=i(2)(!1)).push([t.i,"\n.graph-container {\n    width:700px;\n    height:auto;\n    max-height:95%;\n    position:fixed;\n    top: calc(50% - 300px);\n    left:calc(50% - 350px);\n    border: 1px solid #ccc;\n    border-radius: 0 0 5px 5px;\n    background: white;\n    box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2);\n    z-index:11;\n}\n.my-spinner {\n  display:block;\n  text-align: center;\n  vertical-align: middle;\n  color: grey;\n  height:100%;\n  line-height: 150px;\n}\n.my-spinner > span {\n  vertical-align: middle;\n}\n.graph-container .tio-element {\n  font-color: darkgrey;\n  font-size: 12px;\n  /* display:inline-block;*/\n  margin-top:20px;\n  vertical-align:top;\n  padding:0 5px;\n}\n.graph-container .tio-element  > div {\n  margin-left:10px;\n}\n.graph-container .graph-infos {\n   margin:0px;\n   padding:0;\n   font-size:0.9rem;\n}\n.graph-container .graph-header {\n  background: #f3F3F3;\n  position:relative;\n  margin: 0;\n}\n.graph-container .graph-infos label {\n  font-weight:700;\n}\n.graph-container .graph-header h4 {\n  margin:0;\n  padding: 5px 10px 5px 5px;\n  cursor: move;\n}\n.graph-container .graph-header .fa.fa-close {\n  display:block;\n  float:right;\n  margin: 3px 5px;\n  padding: 2px;\n  border: 1px dotted #f3F3F3;\n  cursor: pointer;\n}\n.graph-container .graph-header .fa.fa-close:hover {\n  border-color: #333;\n}\n",""]),t.exports=e},234:function(t,e,i){"use strict";var n=i(220),s=i.n(n);e.default=s.a},235:function(t,e,i){"use strict";i.r(e);var n=i(218),s=i(223),a=i.n(s),o=i(224),r=i.n(o),l=i(225),h=i.n(l),d=i(226),u=i.n(d),p=i(227),c=i.n(p),m={name:"CompassRose",props:{lang:{type:String,default:"en"},width:{type:Number,default:150},height:{type:Number,default:150},maxVelocity:{type:Number,default:6},maxComp:{type:Number,default:6},ns:{type:Number,default:3},ew:{type:Number,default:3},dateStr:{type:String,default:null},dateNs:{type:Number,default:null},dateEw:{type:Number,default:null},color:{type:String,default:"#f00"},color2:{type:String,default:"#0f0"}},data:function(){return{size:{width:500,height:250},center:{x:125,y:125},radius:100}},computed:{point:function(){return{x:this.ew*this.radius/this.velocityRef+this.center.x,y:this.ns*this.radius/this.velocityRef+this.center.y}},ptDate:function(){return this.dateEw&&this.dateNs?{x:this.dateEw*this.radius/this.magnRef+this.center.x,y:this.dateNs*this.radius/this.magnRef+this.center.y}:null},magnRef:function(){var t=Math.floor(Math.log10(this.maxComp));return Math.round(this.maxComp/Math.pow(10,t))*Math.pow(10,t)},velocityRef:function(){var t=Math.floor(Math.log10(this.maxVelocity)),e=Math.round(this.maxVelocity/Math.pow(10,t))*Math.pow(10,t);return t<0?e.toFixed(-t):e}},created:function(){this.center.x=this.size.width/4,this.center.y=this.size.height/2,this.$i18n.locale=this.lang}},f=(i(228),i(1)),v=i(230),g=Object(f.a)(m,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("svg",{staticClass:"compass-rose",style:{width:2*t.width+"px",height:t.height+"px"},attrs:{xmlns:"http://www.w3.org/2000/svg",width:t.size.width,height:t.size.height,viewBox:"0 0 "+t.size.width+" "+t.size.height}},[i("defs",[i("marker",{attrs:{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto"}},[i("polygon",{attrs:{points:"2.5 3.5, 0 0, 10 3.5, 0 7",fill:t.color}})]),t._v(" "),i("marker",{attrs:{id:"arrowhead2",markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto"}},[i("polygon",{attrs:{points:"2.5 3.5, 0 0, 10 3.5, 0 7",fill:t.color2}})]),t._v(" "),i("marker",{attrs:{id:"hyphen",viewBox:"0 0 0 10",refX:"0",refY:"5",markerWidth:"6",markerHeight:"6"}},[i("line",{attrs:{x1:"0",y1:"0",x2:"0",y2:"10",stroke:t.color}})])]),t._v(" "),i("g",[i("circle",{attrs:{cx:t.center.x,cy:t.center.y,r:t.radius-2,stroke:"#000","stroke-width":"2",fill:"transparent"}}),t._v(" "),i("line",{attrs:{x1:t.center.x,y1:t.center.y-t.radius,x2:t.center.x,y2:t.center.y+t.radius,stroke:"#000"}}),t._v(" "),i("line",{attrs:{x1:t.center.x-t.radius,y1:t.center.y,x2:t.center.x+t.radius,y2:t.center.y,stroke:"#000"}}),t._v(" "),i("text",{staticClass:"card",attrs:{x:t.center.x,y:t.center.y-t.radius-5,"text-anchor":"middle"}},[t._v("N")]),t._v(" "),i("text",{staticClass:"card",attrs:{x:t.center.x,y:t.center.y+t.radius+18,"text-anchor":"middle"}},[t._v("S")]),t._v(" "),i("text",{staticClass:"card",attrs:{x:t.center.x-t.radius-3,y:t.center.y+6,"text-anchor":"end"}},[t._v(t._s(t.$t("symbol_west")))]),t._v(" "),i("text",{staticClass:"card",attrs:{x:t.center.x+t.radius+3,y:t.center.y+6,"text-anchor":"start"}},[t._v("E")])]),t._v(" "),i("g",[i("line",{attrs:{x1:t.center.x,y1:t.center.y,x2:t.point.x,y2:t.point.y,stroke:t.color,"stroke-width":"2","marker-end":"url(#arrowhead)"}}),t._v(" "),t.ptDate?i("line",{attrs:{x1:t.center.x,y1:t.center.y,x2:t.ptDate.x,y2:t.ptDate.y,stroke:t.color2,"stroke-width":"2","marker-end":"url(#arrowhead2)"}}):t._e()]),t._v(" "),i("g",[i("text",{attrs:{fill:t.color,x:.65*t.size.width+t.radius/2,y:.25*t.size.height-30,color:t.color,"text-anchor":"middle"}},[t._v("\n   "+t._s(t.$t("mean_velocity"))+" \n   ")]),t._v(" "),i("text",{attrs:{fill:t.color,x:.65*t.size.width+t.radius/2,y:.25*t.size.height-10,"text-anchor":"middle"}},[t._v("\n    "+t._s(t.velocityRef)+" "+t._s(t.$t("meter_day"))+"\n   ")]),t._v(" "),i("line",{attrs:{x1:.65*t.size.width,x2:.65*t.size.width+t.radius,y1:.25*t.size.height,y2:.25*t.size.height,stroke:t.color,"stroke-width":"2","marker-end":"url(#arrowhead)"}})]),t._v(" "),i("g",[i("text",{attrs:{fill:t.color2,x:.65*t.size.width+t.radius/2,y:.55*t.size.height-30,color:t.color,"text-anchor":"middle"}},[t._v("\n   "+t._s(t.dateStr)+" \n   ")]),t._v(" "),i("text",{attrs:{fill:t.color2,x:.65*t.size.width+t.radius/2,y:.55*t.size.height-10,"text-anchor":"middle"}},[t._v("\n    "+t._s(t.magnRef)+" m\n   ")]),t._v(" "),i("line",{attrs:{x1:.65*t.size.width,x2:.65*t.size.width+t.radius,y1:.55*t.size.height,y2:.55*t.size.height,stroke:t.color2,"stroke-width":"2","marker-end":"url(#arrowhead2)"}})])])])}),[],!1,null,null,null);"function"==typeof v.default&&Object(v.default)(g);var x=g.exports,y=i(231),_=i.n(y),w=i(0),b=i.n(w);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}"object"===k(n)&&(a()(n),r()(n),h()(n),u()(n),c()(n)),n.Pointer.prototype.reset=function(){};var z={name:"tioGraph",components:{CompassRose:x},props:{dates:{type:Array,default:function(){return[]}},nsValues:{type:Array,default:function(){return[]}},ewValues:{type:Array,default:function(){return[]}},keys:{type:Array,default:function(){return[]}},height:{type:Number,default:180},lang:{type:String,default:"en"},maximum:{type:Number,default:null}},data:function(){return{quality:{},graphs:{},position:{lat:null,lng:null},point:{ns:0,ew:0},pointDate:{ns:null,ew:null,magn:null,date:null},hasValues:!1,windowHeight:675,windowResizeListener:null,compassColors:{mean:"#ff4500",date:"#b600b1"},magnValues:[],colors:{ns:"blue",ew:"#f00",magn:"#006400"},mousemoveListener:null,mouseupListener:null,selected:!1,delta:{x:0,y:0},pos:{x:0,y:0},maxComp:null,maxVelocity:null}},watch:{nsValues:function(t){this.pointDateInit(),this.draw("ns",t)},ewValues:function(t){this.pointDateInit(),this.draw("ew",t)},magnValues:function(t){this.pointDateInit(),this.draw("magn",t)}},created:function(){this.$i18n.locale=this.lang,b.a.locale(this.lang),this.windowResizeListener=this.initSize.bind(this),window.addEventListener("resize",this.windowResizeListener),this.mousemoveListener=this.move.bind(this),document.addEventListener("mousemove",this.mousemoveListener),this.mouseupListener=this.moveEnd.bind(this),document.addEventListener("mouseup",this.mouseupListener)},mounted:function(){this.initSize()},destroyed:function(){window.removeEventListener("resize",this.windowResizeListener),this.windowResizeListener=null,document.removeEventListener("mousemove",this.mousemoveListener),this.mousemoveListener=null,document.removeEventListener("mouseup",this.mouseupListener),this.mouseupListener=null},methods:{initSize:function(){this.windowHeight=Math.min(.95*window.innerHeight,675),this.initPosition()},initPosition:function(){var t=(window.innerWidth-700)/2,e=(window.innerHeight-this.windowHeight)/2;this.$el.style.left=t+"px",this.$el.style.top=e+"px",this.pos.x=t,this.pos.y=this.$el.offsetTop},movestart:function(t){this.selected=!0,this.delta={x:this.pos.x-this.$el.offsetLeft,y:this.pos.y-this.$el.offsetTop}},move:function(t){this.pos.x=t.clientX,this.pos.y=t.clientY,this.selected&&(this.$el.style.left=this.pos.x-this.delta.x+"px",this.$el.style.top=this.pos.y-this.delta.y+"px")},moveEnd:function(){this.selected=!1},pointDateInit:function(){this.pointDate={ns:null,ew:null,magn:null,date:null}},highlight:function(t,e){var i,n,s=this;if(!this.graphs[e])return!1;if(i=this.graphs[e].pointer.normalize(t),n=this.graphs[e].series[0].searchPoint(i,!0))for(var a in this.pointDate.date=b.a.unix(n.x/1e3).format("ll"),this.pointDate[e]=n.open,this.graphs){var o;if((o=this.graphs[a])&&void 0!==o){var r=o.series[0].points.find((function(t){return t.x===s.point.x}));void 0!==r&&(this.pointDate[a]=r.open),o.xAxis[0].removePlotLine("highlight"),o.xAxis[0].addPlotLine({color:"#999999",value:n.x,width:1,id:"highlight"})}}},addSpinner:function(t){var e=document.createElement("div");e.setAttribute("class","my-spinner");var i=document.createElement("span");i.setAttribute("class","fa fa-spinner fa-spin fa-2x fa-fw"),e.appendChild(i),this.$el.querySelector("#graph_"+t).appendChild(e)},draw:function(t,e){var i=null;"ns"===t&&this.ewValues.length>5&&(i=this.ewValues),"ew"===t&&this.nsValues.length>5&&(i=this.nsValues),this.graphs[t]&&(this.graphs[t].destroy(),this.graphs[t]=null,this.addSpinner(t)),this.position.lat=e[0],this.position.lng=e[1],this.position.height=e[2],i&&(this.magnValues[0]=e[0],this.magnValues[1]=e[1],this.magnValues[2]=e[2]);var s=this.keys.findIndex((function(t){return"velocity"===t}));this.point[t]=e[s],i&&(this.magnValues[s]=Math.round(1e4*Math.sqrt(e[s]*e[s]+i[s]*i[s]))/1e4),s=this.keys.findIndex((function(t){return"quality"===t}));var a=Math.round(100*e[s])/100;if(i&&(this.magnValues[s]=Math.sqrt(e[s]*e[s]+i[s]*i[s])),this.quality[t]=a,!e[s]||0===e[s])return console.log("Aucune valeur"),void(this.hasValues=!1);this.hasValues=!0;var o=this.keys.length;e=e.slice(this.keys.length);var r=[],l=null,h=null,d=[],u=[],p=[],c=this;if("magn"!==t&&(this.maxComp=null),this.dates.forEach((function(t,n){i&&(null!==e[n]?(c.magnValues[o+n]=Math.round(1e3*Math.sqrt(e[n]*e[n]+i[o+n]*i[o+n]))/1e3,c.maxComp<c.magnValues[o+n]&&(c.maxComp=c.magnValues[o+n])):c.magnValues[o+n]=null),isNaN(e[n])||null===e[n]||(r.push([t,e[n],e[n]+a,e[n]-a,e[n]]),p.push(t),u.push(e[n]),(null===l||l>e[n])&&(l=e[n]),(null===h||h<e[n])&&(h=e[n]),d.push({color:"#ccd6eb",value:t,width:1,id:n}))})),0!==r.length){var m,f,v,g,x,y,w,k,z,C=(m=u,f=p,v=_.a.corrcoeff(f,m),g=_.a.stdev(m),x=_.a.stdev(f),w=_()(m).mean()-_()(f).mean()*(y=v*(g/x)),{line:[[k=_.a.min(f),w+y*k],[z=_.a.max(f),w+y*z]],r:v});a=Math.round(100*a)/100;var L=this.colors[t];this.$shadeColor(L,.4);this.graphs[t]=n.chart("graph_"+t,{chart:{zoomType:"x"},title:"Test",width:"680px",height:c.height+"px",credits:{enabled:!1},legend:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,formatter:function(e){var i=this;if(!this.point)return!1;var n=[];for(var s in c.colors){var a=c.graphs[s];if(a&&void 0!==a){var o=a.series[0].points.find((function(t){return t.x===i.point.x}));void 0!==o&&(c.pointDate[s]=o.open,n.push('<div><span style="color:'+o.color+';">&#9632;</span> '+s.toUpperCase()+": "+o.open+" &pm; "+c.quality[s]+"</div>"))}s!==t&&a.tooltip.hide()}return c.pointDate.date=b.a.unix(this.point.x/1e3).format("ll"),"<b>"+b.a.unix(this.point.x/1e3).format("ll")+"</b><br />"+n.join("<br />")},shared:!1},plotOptions:{},xAxis:{type:"datetime",lineColor:"#666",events:{afterSetExtremes:function(e){var i=e.min,n=e.max;for(var s in c.graphs)s!==t&&c.graphs[s]&&c.graphs[s].xAxis[0].setExtremes(i,n,!0,!1)}},gridLineWidth:0,plotLines:d},yAxis:{title:{text:t.toUpperCase()},min:l,max:h,plotLines:[{value:0,color:"lightgrey",width:2}]},series:[{name:t,color:L,type:"ohlc",id:t,zIndex:10,data:r,lineWidth:1},{name:"regression",color:L,data:C.line,lineWidth:1,enableMouseTracking:!1}]}),i&&this.draw("magn",this.magnValues)}}}},C=(i(232),i(234)),L=Object(f.a)(z,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasValues,expression:"hasValues"}],staticClass:"graph-container",style:{height:t.windowHeight+"px"}},[i("div",{staticClass:"graph-header",staticStyle:{height:"30px"}},[i("div",{staticClass:"fa fa-close",on:{click:function(e){return t.$emit("close")}}}),t._v(" "),i("h4",{on:{mousedown:t.movestart}},[t._v(t._s(t.$t("plot_point").toUpperCase()))])]),t._v(" "),i("div",{staticClass:"graph-infos",staticStyle:{overflow:"auto"},style:{height:t.windowHeight-30+"px"}},[i("div",{staticStyle:{display:"flex","justify-content":"space-between",cursor:"move"},on:{mousedown:t.movestart}},[t.position.lat?i("div",{staticClass:"tio-element"},[i("label",[t._v("POSITION")]),t._v(" "),i("div",[i("label",[t._v("Lat:")]),t._v(" "+t._s(Math.round(1e3*t.position.lat)/1e3)+"°")]),t._v(" "),i("div",[i("label",[t._v("Lng:")]),t._v(" "+t._s(Math.round(1e3*t.position.lng)/1e3)+"°")]),t._v(" "),i("div",[i("label",[t._v(t._s(t.$t("height"))+":")]),t._v(" "+t._s(t.position.height.toLocaleString())+" m")])]):t._e(),t._v(" "),i("div",{staticClass:"tio-element"},[i("label",[t._v(t._s(t.$t("mean_velocity").toUpperCase()))]),t._v(" "),i("div",[i("label",[t._v("NS:")]),t._v(" "+t._s(t.point.ns))]),t._v(" "),i("div",[i("label",[t._v("EW:")]),t._v(" "+t._s(t.point.ew))]),t._v(" "),i("div",[i("label",[t._v("MAGN:")]),t._v(" "+t._s(t.point.magn))])]),t._v(" "),i("div",{staticClass:"tio-element"},[i("label",[t._v(t._s(t.$t("QUALITY")))]),t._v(" "),i("div",[i("label",[t._v("NS:")]),t._v(" "+t._s(t.quality.ns))]),t._v(" "),i("div",[i("label",[t._v("EW:")]),t._v(" "+t._s(t.quality.ew))]),t._v(" "),i("div",[i("label",[t._v("MAGN:")]),t._v(" "+t._s(t.quality.magn))])]),t._v(" "),i("div",[i("compass-rose",{attrs:{lang:t.lang,width:100,height:100,"max-velocity":t.point.magn,"max-comp":t.maxComp,ns:t.point.ns,ew:t.point.ew,color:t.compassColors.mean,color2:t.compassColors.date,"date-ns":t.pointDate.ns,"date-ew":t.pointDate.ew,"date-str":t.pointDate.date}})],1)]),t._v(" "),i("div",{style:{height:t.height+"px"},attrs:{id:"graph_ns"},on:{mousemove:function(e){return t.highlight(e,"ns")}}},[t._m(0)]),t._v(" "),i("div",{style:{height:t.height+"px"},attrs:{id:"graph_ew"},on:{mousemove:function(e){return t.highlight(e,"ew")}}},[t._m(1)]),t._v(" "),i("div",{style:{height:t.height+"px"},attrs:{id:"graph_magn"},on:{mousemove:function(e){return t.highlight(e,"magn")}}},[t._m(2)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"my-spinner"},[e("span",{staticClass:"fa fa-spinner fa-spin fa-2x fa-fw"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"my-spinner"},[e("span",{staticClass:"fa fa-spinner fa-spin fa-2x fa-fw"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"my-spinner"},[e("span",{staticClass:"fa fa-spinner fa-spin fa-2x fa-fw"})])}],!1,null,null,null);"function"==typeof C.default&&Object(C.default)(L);e.default=L.exports}}]);
//# sourceMappingURL=1.gdm-tio-vjs.js.map
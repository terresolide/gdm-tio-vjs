(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{228:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"fr":{"by_date":"By date","height":"Hauteur","plot_point":"Données du point sélectionné","mean_velocity":"Vitesse moyenne","QUALITY":"QUALITÉ"},"en":{"by_date":"Par date","height":"Height","plot_point":"Data of the selected point","mean_velocity":"Mean velocity","QUALITY":"QUALITY"}}'),delete t.options._Ctor}},229:function(t,e,n){var i=n(237);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(3).default)("64cb7607",i,!0,{})},236:function(t,e,n){"use strict";n(229)},237:function(t,e,n){(e=n(2)(!1)).push([t.i,"\n.graph-container {\n    width:700px;\n    height:auto;\n    max-height:95%;\n    position:fixed;\n    top: calc(50% - 300px);\n    left:calc(50% - 350px);\n    border: 1px solid #ccc;\n    border-radius: 0 0 5px 5px;\n    background: white;\n    box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2);\n}\n.graph-container .tio-element {\n  font-color: darkgrey;\n  font-size: 12px;\n  /* display:inline-block;*/\n  margin-top:20px;\n  vertical-align:top;\n  padding:0 5px;\n}\n.graph-container .tio-element  > div {\n  margin-left:10px;\n}\n.graph-container .graph-infos {\n   margin:0px;\n   padding:0;\n   font-size:0.9rem;\n}\n.graph-container .graph-header {\n  background: #f3F3F3;\n  position:relative;\n  margin: 0;\n}\n.graph-container .graph-infos label {\n  font-weight:700;\n}\n.graph-container .graph-header h4 {\n  margin:0;\n  padding: 5px 10px 5px 5px;\n  cursor: move;\n}\n.graph-container .graph-header .fa.fa-close {\n  display:block;\n  float:right;\n  margin: 3px 5px;\n  padding: 2px;\n  border: 1px dotted #f3F3F3;\n  cursor: pointer;\n}\n.graph-container .graph-header .fa.fa-close:hover {\n  border-color: #333;\n}\n",""]),t.exports=e},238:function(t,e,n){"use strict";var i=n(228),o=n.n(i);e.default=o.a},239:function(t,e,n){"use strict";n.r(e);var i=n(227),o=n(230),s=n.n(o),a=n(231),l=n.n(a),r=n(232),h=n.n(r),p=n(233),u=n.n(p),d=n(234),c=n.n(d),v=n(173),g=n(235),f=n.n(g),m=n(0),y=n.n(m);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}"object"===_(i)&&(s()(i),l()(i),h()(i),u()(i),c()(i)),i.Pointer.prototype.reset=function(){};var x={name:"tioGraph",components:{CompassRose:v.a},props:{dates:{type:Array,default:function(){return[]}},nsValues:{type:Array,default:function(){return[]}},ewValues:{type:Array,default:function(){return[]}},magnValues:{type:Array,default:function(){return[]}},keys:{type:Array,default:function(){return[]}},height:{type:Number,default:180},lang:{type:String,default:"en"}},data:function(){return{quality:{},graphs:{},position:{lat:null,lng:null},point:{ns:0,ew:0},pointDate:{ns:null,ew:null,magn:null,date:null},hasValues:!1,windowHeight:675,windowResizeListener:null,compassColors:{mean:"#ff4500",date:"#b600b1"},colors:{ns:"blue",ew:"#f00",magn:"#006400"},mousemoveListener:null,mouseupListener:null,selected:!1,delta:{x:0,y:0},pos:{x:0,y:0}}},watch:{nsValues:function(t){this.pointDateInit(),this.draw("ns",t)},ewValues:function(t){this.pointDateInit(),this.draw("ew",t)},magnValues:function(t){this.pointDateInit(),this.draw("magn",t)}},created:function(){this.$i18n.locale=this.lang,this.windowResizeListener=this.initSize.bind(this),window.addEventListener("resize",this.windowResizeListener),this.mousemoveListener=this.move.bind(this),document.addEventListener("mousemove",this.mousemoveListener),this.mouseupListener=this.moveEnd.bind(this),document.addEventListener("mouseup",this.mouseupListener)},mounted:function(){this.initSize()},destroyed:function(){window.removeEventListener("resize",this.windowResizeListener),this.windowResizeListener=null,document.removeEventListener("mousemove",this.mousemoveListener),this.mousemoveListener=null,document.removeEventListener("mouseup",this.mouseupListener),this.mouseupListener=null},methods:{initSize:function(){this.windowHeight=Math.min(.95*window.innerHeight,675),this.initPosition()},initPosition:function(){var t=(window.innerWidth-700)/2,e=(window.innerHeight-this.windowHeight)/2;this.$el.style.left=t+"px",this.$el.style.top=e+"px",this.pos.x=t,this.pos.y=this.$el.offsetTop},movestart:function(t){this.selected=!0,this.delta={x:this.pos.x-this.$el.offsetLeft,y:this.pos.y-this.$el.offsetTop}},move:function(t){this.pos.x=t.clientX,this.pos.y=t.clientY,this.selected&&(this.$el.style.left=this.pos.x-this.delta.x+"px",this.$el.style.top=this.pos.y-this.delta.y+"px")},moveEnd:function(){this.selected=!1},pointDateInit:function(){this.pointDate={ns:null,ew:null,magn:null,date:null}},highlight:function(t,e){var n,i;if(!this.graphs[e])return!1;if(n=this.graphs[e].pointer.normalize(t),i=this.graphs[e].series[0].searchPoint(n,!0))for(var o in this.graphs){var s;(s=this.graphs[o])&&void 0!==s&&(s.xAxis[0].removePlotLine("highlight"),s.xAxis[0].addPlotLine({color:"#999999",value:i.x,width:1,id:"highlight"}))}},draw:function(t,e){this.graphs[t]&&(this.graphs[t].destroy(),this.graphs[t]=null),this.position.lat=e[0],this.position.lng=e[1],this.position.height=e[2];var n=this.keys.findIndex((function(t){return"velocity"===t}));this.point[t]=e[n],n=this.keys.findIndex((function(t){return"quality"===t}));var o=Math.round(100*e[n])/100;if(this.quality[t]=o,0===e[n])return console.log("Aucune valeur"),void(this.hasValues=!1);this.hasValues=!0,e=e.slice(this.keys.length);var s=[],a=null,l=null,r=[],h=[],p=[];this.dates.forEach((function(t,n){isNaN(e[n])||null===e[n]||(s.push([t,e[n],e[n]+o,e[n]-o,e[n]]),p.push(t),h.push(e[n]),(null===a||a>e[n])&&(a=e[n]),(null===l||l<e[n])&&(l=e[n]),r.push({color:"#ccd6eb",value:t,width:1,id:n}))}));var u,d,c,v,g,m,_,x,w,b=(u=h,d=p,c=f.a.corrcoeff(d,u),v=f.a.stdev(u),g=f.a.stdev(d),_=f()(u).mean()-f()(d).mean()*(m=c*(v/g)),{line:[[x=f.a.min(d),_+m*x],[w=f.a.max(d),_+m*w]],r:c});if(0!==s.length){var L=this;o=Math.round(100*o)/100;var C=this.colors[t];this.$shadeColor(C,.4);this.graphs[t]=i.chart("graph_"+t,{chart:{zoomType:"x"},title:"Test",width:"680px",height:L.height+"px",credits:{enabled:!1},legend:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,formatter:function(e){var n=this;if(!this.point)return!1;var i=[];for(var o in L.graphs){var s=L.graphs[o];if(s&&void 0!==s){var a=s.series[0].points.find((function(t){return t.x===n.point.x}));L.pointDate[o]=a.open,i.push('<div><span style="color:'+a.color+';">&#9632;</span> '+o.toUpperCase()+": "+a.open+" &pm; "+L.quality[o]+"</div>")}o!==t&&s.tooltip.hide()}return L.pointDate.date=y.a.unix(this.point.x/1e3).format("ll"),"<b>"+y.a.unix(this.point.x/1e3).format("ll")+"</b><br />"+i.join("<br />")},shared:!1},plotOptions:{},xAxis:{type:"datetime",lineColor:"#666",events:{},gridLineWidth:0,plotLines:r},yAxis:{title:{text:t.toUpperCase()},min:a,max:l,plotLines:[{value:0,color:"lightgrey",width:2}]},series:[{name:t,color:C,type:"ohlc",id:t,zIndex:10,data:s,lineWidth:1},{name:"regression",color:C,data:b.line,lineWidth:1,enableMouseTracking:!1}]})}}}},w=(n(236),n(1)),b=n(238),L=Object(w.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.hasValues,expression:"hasValues"}],staticClass:"graph-container",style:{height:t.windowHeight+"px"}},[n("div",{staticClass:"graph-header",staticStyle:{height:"30px"}},[n("div",{staticClass:"fa fa-close",on:{click:function(e){return t.$emit("close")}}}),t._v(" "),n("h4",{on:{mousedown:t.movestart}},[t._v(t._s(t.$t("plot_point").toUpperCase()))])]),t._v(" "),n("div",{staticClass:"graph-infos",staticStyle:{overflow:"scroll"},style:{height:t.windowHeight-30+"px"}},[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t.position.lat?n("div",{staticClass:"tio-element"},[n("label",[t._v("POSITION")]),t._v(" "),n("div",[n("label",[t._v("Lat:")]),t._v(" "+t._s(Math.round(1e3*t.position.lat)/1e3)+"°")]),t._v(" "),n("div",[n("label",[t._v("Lng:")]),t._v(" "+t._s(Math.round(1e3*t.position.lng)/1e3)+"°")]),t._v(" "),n("div",[n("label",[t._v(t._s(t.$t("height"))+":")]),t._v(" "+t._s(t.position.height.toLocaleString())+" m")])]):t._e(),t._v(" "),n("div",{staticClass:"tio-element"},[n("label",[t._v(t._s(t.$t("mean_velocity").toUpperCase()))]),t._v(" "),n("div",[n("label",[t._v("NS:")]),t._v(" "+t._s(t.point.ns))]),t._v(" "),n("div",[n("label",[t._v("EW:")]),t._v(" "+t._s(t.point.ew))]),t._v(" "),n("div",[n("label",[t._v("MAGN:")]),t._v(" "+t._s(t.point.magn))])]),t._v(" "),n("div",{staticClass:"tio-element"},[n("label",[t._v(t._s(t.$t("QUALITY")))]),t._v(" "),n("div",[n("label",[t._v("NS:")]),t._v(" "+t._s(t.quality.ns))]),t._v(" "),n("div",[n("label",[t._v("EW:")]),t._v(" "+t._s(t.quality.ew))]),t._v(" "),n("div",[n("label",[t._v("MAGN:")]),t._v(" "+t._s(t.quality.magn))])]),t._v(" "),n("div",[n("compass-rose",{attrs:{lang:t.lang,width:100,height:100,max:.005,ns:t.point.ns,ew:t.point.ew,color:t.compassColors.mean,color2:t.compassColors.date,"date-ns":t.pointDate.ns,"date-ew":t.pointDate.ew}})],1),t._v(" "),n("div",{staticClass:"tio-element"},[n("div",{style:{color:t.compassColors.mean}},[n("label",[t._v("→")]),t._v(" "+t._s(t.$t("mean_velocity")))]),t._v(" "),n("div",{style:{color:t.compassColors.date}},[n("label",[t._v("→")]),t._v(" "+t._s(t.pointDate.date||t.$t("by_date")))])])]),t._v(" "),n("div",{style:{height:t.height+"px"},attrs:{id:"graph_ns"},on:{mousemove:function(e){return t.highlight(e,"ns")}}}),t._v(" "),n("div",{style:{height:t.height+"px"},attrs:{id:"graph_ew"},on:{mousemove:function(e){return t.highlight(e,"ew")}}}),t._v(" "),n("div",{style:{height:t.height+"px"},attrs:{id:"graph_magn"},on:{mousemove:function(e){return t.highlight(e,"magn")}}})])])}),[],!1,null,null,null);"function"==typeof b.default&&Object(b.default)(L);e.default=L.exports}}]);
//# sourceMappingURL=2.gdm-tio-vjs.js.map
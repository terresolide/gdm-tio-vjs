(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{227:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"fr":{"by_date":"By date","height":"Hauteur","plot_point":"Données du point sélectionné","mean_velocity":"Vitesse moyenne","QUALITY":"QUALITÉ"},"en":{"by_date":"Par date","height":"Height","plot_point":"Data of the selected point","mean_velocity":"Mean velocity","QUALITY":"QUALITY"}}'),delete t.options._Ctor}},228:function(t,e,n){var i=n(236);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(3).default)("64cb7607",i,!0,{})},235:function(t,e,n){"use strict";n(228)},236:function(t,e,n){(e=n(2)(!1)).push([t.i,"\n.graph-container {\n    width:700px;\n    height:auto;\n    max-height:95%;\n    position:fixed;\n    top: calc(50% - 300px);\n    left:calc(50% - 350px);\n    border: 1px solid #ccc;\n    border-radius: 0 0 5px 5px;\n    background: white;\n    box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2);\n    z-index:11;\n}\n.my-spinner {\n  display:block;\n  text-align: center;\n  vertical-align: middle;\n  color: grey;\n  height:100%;\n  line-height: 150px;\n}\n.my-spinner > span {\n  vertical-align: middle;\n}\n.graph-container .tio-element {\n  font-color: darkgrey;\n  font-size: 12px;\n  /* display:inline-block;*/\n  margin-top:20px;\n  vertical-align:top;\n  padding:0 5px;\n}\n.graph-container .tio-element  > div {\n  margin-left:10px;\n}\n.graph-container .graph-infos {\n   margin:0px;\n   padding:0;\n   font-size:0.9rem;\n}\n.graph-container .graph-header {\n  background: #f3F3F3;\n  position:relative;\n  margin: 0;\n}\n.graph-container .graph-infos label {\n  font-weight:700;\n}\n.graph-container .graph-header h4 {\n  margin:0;\n  padding: 5px 10px 5px 5px;\n  cursor: move;\n}\n.graph-container .graph-header .fa.fa-close {\n  display:block;\n  float:right;\n  margin: 3px 5px;\n  padding: 2px;\n  border: 1px dotted #f3F3F3;\n  cursor: pointer;\n}\n.graph-container .graph-header .fa.fa-close:hover {\n  border-color: #333;\n}\n",""]),t.exports=e},237:function(t,e,n){"use strict";var i=n(227),s=n.n(i);e.default=s.a},238:function(t,e,n){"use strict";n.r(e);var i=n(226),s=n(229),a=n.n(s),o=n(230),l=n.n(o),r=n(231),h=n.n(r),p=n(232),u=n.n(p),d=n(233),c=n.n(d),v=n(173),f=n(234),m=n.n(f),g=n(0),_=n.n(g);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}"object"===y(i)&&(a()(i),l()(i),h()(i),u()(i),c()(i)),i.Pointer.prototype.reset=function(){};var x={name:"tioGraph",components:{CompassRose:v.a},props:{dates:{type:Array,default:function(){return[]}},nsValues:{type:Array,default:function(){return[]}},ewValues:{type:Array,default:function(){return[]}},keys:{type:Array,default:function(){return[]}},height:{type:Number,default:180},lang:{type:String,default:"en"}},data:function(){return{quality:{},graphs:{},position:{lat:null,lng:null},point:{ns:0,ew:0},pointDate:{ns:null,ew:null,magn:null,date:null},hasValues:!1,windowHeight:675,windowResizeListener:null,compassColors:{mean:"#ff4500",date:"#b600b1"},magnValues:[],colors:{ns:"blue",ew:"#f00",magn:"#006400"},mousemoveListener:null,mouseupListener:null,selected:!1,delta:{x:0,y:0},pos:{x:0,y:0}}},watch:{nsValues:function(t){this.pointDateInit(),this.draw("ns",t)},ewValues:function(t){this.pointDateInit(),this.draw("ew",t)},magnValues:function(t){this.pointDateInit(),this.draw("magn",t)}},created:function(){this.$i18n.locale=this.lang,this.windowResizeListener=this.initSize.bind(this),window.addEventListener("resize",this.windowResizeListener),this.mousemoveListener=this.move.bind(this),document.addEventListener("mousemove",this.mousemoveListener),this.mouseupListener=this.moveEnd.bind(this),document.addEventListener("mouseup",this.mouseupListener)},mounted:function(){this.initSize()},destroyed:function(){window.removeEventListener("resize",this.windowResizeListener),this.windowResizeListener=null,document.removeEventListener("mousemove",this.mousemoveListener),this.mousemoveListener=null,document.removeEventListener("mouseup",this.mouseupListener),this.mouseupListener=null},methods:{initSize:function(){this.windowHeight=Math.min(.95*window.innerHeight,675),this.initPosition()},initPosition:function(){var t=(window.innerWidth-700)/2,e=(window.innerHeight-this.windowHeight)/2;this.$el.style.left=t+"px",this.$el.style.top=e+"px",this.pos.x=t,this.pos.y=this.$el.offsetTop},movestart:function(t){this.selected=!0,this.delta={x:this.pos.x-this.$el.offsetLeft,y:this.pos.y-this.$el.offsetTop}},move:function(t){this.pos.x=t.clientX,this.pos.y=t.clientY,this.selected&&(this.$el.style.left=this.pos.x-this.delta.x+"px",this.$el.style.top=this.pos.y-this.delta.y+"px")},moveEnd:function(){this.selected=!1},pointDateInit:function(){this.pointDate={ns:null,ew:null,magn:null,date:null}},highlight:function(t,e){var n,i;if(!this.graphs[e])return!1;if(n=this.graphs[e].pointer.normalize(t),i=this.graphs[e].series[0].searchPoint(n,!0))for(var s in this.graphs){var a;(a=this.graphs[s])&&void 0!==a&&(a.xAxis[0].removePlotLine("highlight"),a.xAxis[0].addPlotLine({color:"#999999",value:i.x,width:1,id:"highlight"}))}},addSpinner:function(t){var e=document.createElement("div");e.setAttribute("class","my-spinner");var n=document.createElement("span");n.setAttribute("class","fa fa-spinner fa-spin fa-2x fa-fw"),e.appendChild(n),this.$el.querySelector("#graph_"+t).appendChild(e)},draw:function(t,e){var n=null;"ns"===t&&this.ewValues.length>5&&(n=this.ewValues),"ew"===t&&this.nsValues.length>5&&(n=this.nsValues),this.graphs[t]&&(this.graphs[t].destroy(),this.graphs[t]=null,this.addSpinner(t)),this.position.lat=e[0],this.position.lng=e[1],this.position.height=e[2],n&&(this.magnValues[0]=e[0],this.magnValues[1]=e[1],this.magnValues[2]=e[2]);var s=this.keys.findIndex((function(t){return"velocity"===t}));this.point[t]=e[s],n&&(this.magnValues[s]=Math.round(1e4*Math.sqrt(e[s]*e[s]+n[s]*n[s]))/1e4),s=this.keys.findIndex((function(t){return"quality"===t}));var a=Math.round(100*e[s])/100;if(n&&(this.magnValues[s]=Math.sqrt(e[s]*e[s]+n[s]*n[s])),this.quality[t]=a,0===e[s])return console.log("Aucune valeur"),void(this.hasValues=!1);this.hasValues=!0;var o=this.keys.length;e=e.slice(this.keys.length);var l=[],r=null,h=null,p=[],u=[],d=[],c=this;this.dates.forEach((function(t,i){n&&(null!==e[i]?c.magnValues[o+i]=Math.round(1e3*Math.sqrt(e[i]*e[i]+n[o+i]*n[o+i]))/1e3:c.magnValues[o+i]=null),isNaN(e[i])||null===e[i]||(l.push([t,e[i],e[i]+a,e[i]-a,e[i]]),d.push(t),u.push(e[i]),(null===r||r>e[i])&&(r=e[i]),(null===h||h<e[i])&&(h=e[i]),p.push({color:"#ccd6eb",value:t,width:1,id:i}))}));var v,f,g,y,x,w,b,L,C,V=(v=u,f=d,g=m.a.corrcoeff(f,v),y=m.a.stdev(v),x=m.a.stdev(f),b=m()(v).mean()-m()(f).mean()*(w=g*(y/x)),{line:[[L=m.a.min(f),b+w*L],[C=m.a.max(f),b+w*C]],r:g});if(0!==l.length){a=Math.round(100*a)/100;var $=this.colors[t];this.$shadeColor($,.4);this.graphs[t]=i.chart("graph_"+t,{chart:{zoomType:"x"},title:"Test",width:"680px",height:c.height+"px",credits:{enabled:!1},legend:{enabled:!1},exporting:{enabled:!1},tooltip:{enabled:!0,formatter:function(e){var n=this;if(!this.point)return!1;var i=[];for(var s in c.colors){var a=c.graphs[s];if(a&&void 0!==a){var o=a.series[0].points.find((function(t){return t.x===n.point.x}));void 0!==o&&(c.pointDate[s]=o.open,i.push('<div><span style="color:'+o.color+';">&#9632;</span> '+s.toUpperCase()+": "+o.open+" &pm; "+c.quality[s]+"</div>"))}s!==t&&a.tooltip.hide()}return c.pointDate.date=_.a.unix(this.point.x/1e3).format("ll"),"<b>"+_.a.unix(this.point.x/1e3).format("ll")+"</b><br />"+i.join("<br />")},shared:!1},plotOptions:{},xAxis:{type:"datetime",lineColor:"#666",events:{afterSetExtremes:function(e){var n=e.min,i=e.max;for(var s in c.graphs)s!==t&&c.graphs[s]&&c.graphs[s].xAxis[0].setExtremes(n,i,!0,!1)}},gridLineWidth:0,plotLines:p},yAxis:{title:{text:t.toUpperCase()},min:r,max:h,plotLines:[{value:0,color:"lightgrey",width:2}]},series:[{name:t,color:$,type:"ohlc",id:t,zIndex:10,data:l,lineWidth:1},{name:"regression",color:$,data:V.line,lineWidth:1,enableMouseTracking:!1}]}),n&&this.draw("magn",this.magnValues)}}}},w=(n(235),n(1)),b=n(237),L=Object(w.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.hasValues,expression:"hasValues"}],staticClass:"graph-container",style:{height:t.windowHeight+"px"}},[n("div",{staticClass:"graph-header",staticStyle:{height:"30px"}},[n("div",{staticClass:"fa fa-close",on:{click:function(e){return t.$emit("close")}}}),t._v(" "),n("h4",{on:{mousedown:t.movestart}},[t._v(t._s(t.$t("plot_point").toUpperCase()))])]),t._v(" "),n("div",{staticClass:"graph-infos",staticStyle:{overflow:"scroll"},style:{height:t.windowHeight-30+"px"}},[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t.position.lat?n("div",{staticClass:"tio-element"},[n("label",[t._v("POSITION")]),t._v(" "),n("div",[n("label",[t._v("Lat:")]),t._v(" "+t._s(Math.round(1e3*t.position.lat)/1e3)+"°")]),t._v(" "),n("div",[n("label",[t._v("Lng:")]),t._v(" "+t._s(Math.round(1e3*t.position.lng)/1e3)+"°")]),t._v(" "),n("div",[n("label",[t._v(t._s(t.$t("height"))+":")]),t._v(" "+t._s(t.position.height.toLocaleString())+" m")])]):t._e(),t._v(" "),n("div",{staticClass:"tio-element"},[n("label",[t._v(t._s(t.$t("mean_velocity").toUpperCase()))]),t._v(" "),n("div",[n("label",[t._v("NS:")]),t._v(" "+t._s(t.point.ns))]),t._v(" "),n("div",[n("label",[t._v("EW:")]),t._v(" "+t._s(t.point.ew))]),t._v(" "),n("div",[n("label",[t._v("MAGN:")]),t._v(" "+t._s(t.point.magn))])]),t._v(" "),n("div",{staticClass:"tio-element"},[n("label",[t._v(t._s(t.$t("QUALITY")))]),t._v(" "),n("div",[n("label",[t._v("NS:")]),t._v(" "+t._s(t.quality.ns))]),t._v(" "),n("div",[n("label",[t._v("EW:")]),t._v(" "+t._s(t.quality.ew))]),t._v(" "),n("div",[n("label",[t._v("MAGN:")]),t._v(" "+t._s(t.quality.magn))])]),t._v(" "),n("div",[n("compass-rose",{attrs:{lang:t.lang,width:100,height:100,max:.005,ns:t.point.ns,ew:t.point.ew,color:t.compassColors.mean,color2:t.compassColors.date,"date-ns":t.pointDate.ns,"date-ew":t.pointDate.ew}})],1),t._v(" "),n("div",{staticClass:"tio-element"},[n("div",{style:{color:t.compassColors.mean}},[n("label",[t._v("→")]),t._v(" "+t._s(t.$t("mean_velocity")))]),t._v(" "),n("div",{style:{color:t.compassColors.date}},[n("label",[t._v("→")]),t._v(" "+t._s(t.pointDate.date||t.$t("by_date")))])])]),t._v(" "),n("div",{style:{height:t.height+"px"},attrs:{id:"graph_ns"},on:{mousemove:function(e){return t.highlight(e,"ns")}}},[t._m(0)]),t._v(" "),n("div",{style:{height:t.height+"px"},attrs:{id:"graph_ew"},on:{mousemove:function(e){return t.highlight(e,"ew")}}},[t._m(1)]),t._v(" "),n("div",{style:{height:t.height+"px"},attrs:{id:"graph_magn"},on:{mousemove:function(e){return t.highlight(e,"magn")}}},[t._m(2)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"my-spinner"},[e("span",{staticClass:"fa fa-spinner fa-spin fa-2x fa-fw"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"my-spinner"},[e("span",{staticClass:"fa fa-spinner fa-spin fa-2x fa-fw"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"my-spinner"},[e("span",{staticClass:"fa fa-spinner fa-spin fa-2x fa-fw"})])}],!1,null,null,null);"function"==typeof b.default&&Object(b.default)(L);e.default=L.exports}}]);
//# sourceMappingURL=2.gdm-tio-vjs.js.map